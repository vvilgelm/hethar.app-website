<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Presence Nudges Demo</title>
  <link rel="stylesheet" href="/css/presence.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Inter', sans-serif;
      background: #0A0A0A;
      color: #fff;
      padding: 40px;
      line-height: 1.6;
    }
    h1 { font-size: 48px; margin-bottom: 20px; }
    h2 { margin: 40px 0 20px; color: #8A8D91; }
    .debug { 
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255,255,255,0.1);
      padding: 16px;
      border-radius: 8px;
      font-size: 12px;
      max-width: 300px;
    }
    .test-input {
      width: 100%;
      max-width: 500px;
      padding: 12px;
      font-size: 16px;
      margin: 20px 0;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      border-radius: 4px;
    }
    .spacer {
      height: 200vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #8A8D91;
    }
    code {
      background: rgba(255,255,255,0.1);
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="debug">
    <strong>Debug Mode: ON</strong><br>
    Open console to see logs.<br>
    <button onclick="sessionStorage.clear();localStorage.clear();location.reload();" style="margin-top:10px;padding:8px;cursor:pointer;">Reset Session</button>
  </div>

  <h1>Presence Nudges v1 â€” Demo</h1>
  
  <p>This page demonstrates the context-aware whisper system. You should see <strong>ONE nudge</strong> based on:</p>
  <ul>
    <li><strong>Proximity</strong> (if within 60-100km of major hubs)</li>
    <li><strong>Behavior</strong> (idle, scroll seeking, type & delete, exit intent)</li>
    <li><strong>Time</strong> (late night, morning, afternoon, evening)</li>
  </ul>

  <h2>Test Behaviors</h2>
  
  <h3>1. Idle Test</h3>
  <p>Don't move your mouse or type for 5 seconds â†’ should trigger idle whisper</p>
  
  <h3>2. Type & Delete Test</h3>
  <input type="text" class="test-input" placeholder="Type at least 20 characters then delete most of it...">
  
  <h3>3. Scroll Seek Test</h3>
  <p>Scroll down, then up, then down rapidly (3+ direction changes) â†’ should trigger scroll seek whisper</p>
  
  <h3>4. Exit Intent Test</h3>
  <p>Move your mouse cursor to the very top of the browser window and exit the viewport â†’ should trigger exit whisper (desktop only)</p>

  <div class="spacer">
    ðŸ‘‡ Scroll down to test scroll-seeking behavior
  </div>
  
  <div class="spacer">
    Keep scrolling...
  </div>
  
  <div class="spacer">
    Now scroll back up rapidly
  </div>
  
  <h2>Implementation</h2>
  <p>Add to your page:</p>
  <pre style="background:rgba(255,255,255,0.05);padding:16px;border-radius:8px;overflow-x:auto;"><code>&lt;link rel="stylesheet" href="/css/presence.css"&gt;
&lt;script defer src="/js/presence.js"&gt;&lt;/script&gt;
&lt;div id="hethar-presence-root" aria-live="polite"&gt;&lt;/div&gt;</code></pre>

  <h2>Configuration</h2>
  <p>Edit flags at the top of <code>presence.js</code>:</p>
  <pre style="background:rgba(255,255,255,0.05);padding:16px;border-radius:8px;overflow-x:auto;"><code>const FLAGS = {
  enableTime: true,
  enableBehavior: true,
  enableProximity: true,
  cooldownHours: 6,
  idleSeconds: 5,
  showDurationMs: 1600,
  debug: false
};</code></pre>

  <h2>Notes</h2>
  <ul>
    <li>Only <strong>one whisper per session</strong> (session = page load â†’ tab close)</li>
    <li><strong>6-hour cooldown</strong> between nudges (stored in localStorage)</li>
    <li>Respects <code>prefers-reduced-motion</code></li>
    <li>Respects Do Not Track for geolocation</li>
    <li>Total size: ~8KB JS + ~2KB CSS (uncompressed)</li>
  </ul>

  <div id="hethar-presence-root" aria-live="polite"></div>
  
  <script>window._presenceDebug = true;</script>
  <script defer src="/js/presence.js"></script>
</body>
</html>

